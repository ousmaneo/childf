"use strict";var underscore=angular.module("underscore",[]);underscore.factory("_",function(){return window._}),angular.module("childfundApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.router","angularModalService","datatables","underscore","mgcrea.ngStrap","angularMoment"]).config(["$stateProvider","$urlRouterProvider","$datepickerProvider",function(a,b,c){b.when("","/login"),a.state("index",{"abstract":!0,views:{applicationContainer:{templateUrl:"../views/layout.html",controller:"MainCtrl"}}}).state("home",{url:"/home",parent:"index",views:{"layoutContainer@index":{templateUrl:"../views/main.html",controller:"MainCtrl"}}}).state("about",{url:"/about",parent:"index",views:{"layoutContainer@index":{templateUrl:"../views/about.html",controller:"MainCtrl"}}}).state("login",{url:"/login",views:{applicationContainer:{templateUrl:"views/login.html",controller:"UserCtrl"}}}).state("accounts",{url:"/accounts",parent:"index",resolve:{accountS:["$stateParams","account","$q",function(a,b,c){var d=c.defer();return b.getData(function(a){d.resolve(a)}),d.promise}],accountItem:function(){}},views:{"layoutContainer@index":{templateUrl:"views/account/accounts.html",controller:"AccountCtrl"}}}).state("viewAccount",{url:"/account/:id/view",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/account/account-view.html",controller:"AccountCtrl"}},resolve:{accountItem:["$stateParams","account","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],accountS:function(){}}}).state("editAccount",{url:"/account/:id/edit",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/account/account-edit.html",controller:"AccountCtrl"}},resolve:{accountItem:["$stateParams","account","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],accountS:function(){}}}).state("programs",{url:"/programs",parent:"index",resolve:{programS:["$stateParams","program","$q",function(a,b,c){var d=c.defer();return b.getData(function(a){d.resolve(a)}),d.promise}],programItem:function(){},projectIn:function(){}},views:{"layoutContainer@index":{templateUrl:"views/program/programs.html",controller:"ProgramsCtrl"}}}).state("viewProgram",{url:"/program/:id/view",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/program/program-view.html",controller:"ProgramsCtrl"},"tableContainer@index":{templateUrl:"views/project/projects.html",controller:"ProjectsCtrl"}},resolve:{programItem:["$stateParams","program","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],programS:function(){},projectS:["$stateParams","project","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=parseInt(a.id),f=c.where(b,{programid:d});e.resolve(f)}),e.promise}],projectItem:function(){}}}).state("projects",{url:"/projects",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/project/projects.html",controller:"ProjectsCtrl"}},resolve:{projectS:["$stateParams","project","$q",function(a,b,c){var d=c.defer();return b.getData(function(a){d.resolve(a)}),d.promise}],projectItem:function(){}}}).state("viewProject",{url:"/project/:id/view",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/project/project-view.html",controller:"ProjectsCtrl"},"tableContainer@index":{templateUrl:"views/activity/activity.html",controller:"ActivityCtrl"}},resolve:{projectItem:["$stateParams","project","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],projectS:function(){},activityS:["$stateParams","activity","$q",function(a,b,c){var d=c.defer();return b.getData(function(b){var c=parseInt(a.id),e=_.where(b,{projectid:c});d.resolve(e)}),d.promise}],activityItem:function(){}}}).state("editProject",{url:"/project/:id/edit",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/project/project-edit.html",controller:"ProjectsCtrl"}},resolve:{projectItem:["$stateParams","project","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],projectS:function(){}}}).state("activities",{url:"/activities",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/activity/activity.html",controller:"ActivityCtrl"}},resolve:{activityS:["$stateParams","activity","$q",function(a,b,c){var d=c.defer();return b.getData(function(a){d.resolve(a)}),d.promise}],activityItem:function(){}}}).state("viewActivity",{url:"/activity/:id/view",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/activity/activity-view.html",controller:"ActivityCtrl"}},resolve:{activityItem:["$stateParams","activity","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],activityS:function(){}}}).state("editActivity",{url:"/activity/:id/edit",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/activity/activity-edit.html",controller:"ActivityCtrl"}},resolve:{activityItem:["$stateParams","activity","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],activityS:function(){}}}).state("receipts",{url:"/receipts",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/receipt/receipts.html",controller:"ReceiptsCtrl"}},resolve:{receiptS:["$stateParams","receipt","$q",function(a,b,c){var d=c.defer();return b.getData(function(a){d.resolve(a)}),d.promise}],receiptItem:function(){}}}).state("viewReceipt",{url:"/receipt/:id/view",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/receipt/receipt-view.html",controller:"ReceiptsCtrl"}},resolve:{receiptItem:["$stateParams","receipt","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],receiptS:function(){}}}).state("editReceipt",{url:"/receipt/:id/edit",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/receipt/receipt-edit.html",controller:"ReceiptsCtrl"}},resolve:{receiptItem:["$stateParams","receipt","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],receiptS:function(){}}}).state("payments",{url:"/payments",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/payment/payments.html",controller:"PaymentsCtrl"}},resolve:{paymentS:["$stateParams","payment","$q",function(a,b,c){var d=c.defer();return b.getData(function(a){d.resolve(a)}),d.promise}],paymentItem:function(){}}}).state("viewPayment",{url:"/payment/:id/view",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/payment/payment-view.html",controller:"PaymentsCtrl"}},resolve:{paymentItem:["$stateParams","payment","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],paymentS:function(){}}}).state("editPayment",{url:"/payments/:id/edit",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/payments/payments-edit.html",controller:"PaymentsCtrl"}},resolve:{paymentItem:["$stateParams","payment","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],paymentS:function(){}}}).state("budgets",{url:"/budgets",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/budget/budgets.html",controller:"BudgetsCtrl"}},resolve:{budgetS:["$stateParams","budget","$q",function(a,b,c){var d=c.defer();return b.getData(function(a){d.resolve(a)}),d.promise}],budgetItem:function(){}}}).state("viewBudget",{url:"/budget/:id/view",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/budget/budget-view.html",controller:"BudgetsCtrl"}},resolve:{budgetItem:["$stateParams","budget","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],budgetS:function(){}}}).state("editBudget",{url:"/budget/:id/edit",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/budget/budget-edit.html",controller:"BudgetsCtrl"}},resolve:{budgetItem:["$stateParams","budget","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],budgetS:function(){}}}).state("reports",{url:"/reports",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/report/reports.html",controller:"ReportsCtrl"}},resolve:{reportS:["$stateParams","report","$q",function(a,b,c){var d=c.defer();return b.getData(function(a){d.resolve(a)}),d.promise}],reportItem:function(){}}}).state("viewReport",{url:"/report/:id/view",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/report/report-view.html",controller:"ReportsCtrl"}},resolve:{reportItem:["$stateParams","report","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],reportS:function(){}}}).state("editReport",{url:"/report/:id/edit",parent:"index",views:{"layoutContainer@index":{templateUrl:"views/report/report-edit.html",controller:"ReportsCtrl"}},resolve:{reportItem:["$stateParams","report","_","$q",function(a,b,c,d){var e=d.defer();return b.getData(function(b){var d=c.find(b,function(b){return b._id==a.id});e.resolve(d)}),e.promise}],reportS:function(){}}}),angular.extend(c.defaults,{dateFormat:"yyyy-MM-dd",startWeek:1})}]),angular.module("childfundApp").controller("MainCtrl",["$scope","$cookieStore","DTOptionsBuilder","DTColumnBuilder",function(a,b,c,d){var e=992;a.getWidth=function(){return window.innerWidth},a.$watch(a.getWidth,function(c){a.toggle=c>=e?angular.isDefined(b.get("toggle"))?b.get("toggle")?!0:!1:!0:!1}),a.toggleSidebar=function(){a.toggle=!a.toggle,b.put("toggle",a.toggle)},window.onresize=function(){a.$apply()};var f=this;f.dtOptions=c.fromSource("scripts/data.json").withPaginationType("full_numbers"),f.dtColumns=[d.newColumn("_id").withTitle("ID"),d.newColumn("title").withTitle("Title"),d.newColumn("description").withTitle("Description"),d.newColumn("createdDate").withTitle("Date"),d.newColumn("projectName").withTitle("Project")]}]),angular.module("childfundApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("childfundApp").controller("UserCtrl",["$scope","$location",function(a,b){a.login=function(){b.url("home")}}]),angular.module("childfundApp").controller("ProgramsCtrl",["$scope","program","ModalService","_","moment","programS","programItem","$state",function(a,b,c,d,e,f,g,h){a.programs=f?f:[],a.program=g?g:{},a.show=function(b){if(b)var e=d.find(a.programs,function(a){return a._id==b.id});c.showModal({templateUrl:"views/program/new.html",controller:"ModalCtrl",inputs:{title:"program",item:e,select:{},current:""}}).then(function(b){b.element.modal(),b.close.then(function(b){b&&(b._id?a.update(b):(a.create(b),a.programs.push(a.program)))})})},a.create=function(b){a.program.name=b.name,a.program.description=b.description,a.program.status=b.status,a.program.createdBy="neo",a.program.createdDate=(new e).format("YYYY-MM-DD HH:mm:ss")},a.cancel=function(){h.go("programs")},a.update=function(){h.go("programs")}}]),angular.module("childfundApp").controller("ProjectsCtrl",["$scope","project","ModalService","_","moment","projectS","projectItem","$state","program",function(a,b,c,d,e,f,g,h,i){a.projects=f?f:[],a.project=g?g:{},a.programs=[],i.getData().$promise.then(function(b){a.programs=b}),a.show=function(b){if(b)var e=d.find(a.projects,function(a){return a._id==b.id});c.showModal({templateUrl:"views/project/new.html",controller:"ModalCtrl",inputs:{title:"project",item:e,select:a.programs,current:h.params.id}}).then(function(b){b.element.modal(),b.close.then(function(b){b&&(b._id?a.update(b):(a.create(b),a.projects.push(a.project)))})})},a.create=function(b){a.project.name=b.name,a.project.description=b.description,a.project.programid=b.programid,a.project.status=b.status,a.project.createdBy="neo",a.project.createdDate=(new e).format("YYYY-MM-DD HH:mm:ss")},a.cancel=function(){h.go("projects")},a.update=function(){h.go("projects")}}]),angular.module("childfundApp").controller("ReceiptsCtrl",["$scope","receipt","ModalService","_","moment","receiptS","receiptItem","$state","account",function(a,b,c,d,e,f,g,h,i){a.receipts=f?f:[],a.receipt=g?g:{},a.accounts=[],i.getData().$promise.then(function(b){a.accounts=b}),a.show=function(b){if(b)var e=d.find(a.receipts,function(a){return a._id==b.id});c.showModal({templateUrl:"views/receipt/new.html",controller:"ModalCtrl",inputs:{title:"receipt",item:e,select:a.accounts,current:""}}).then(function(b){b.element.modal(),b.close.then(function(b){b&&(a.create(b),a.receipts.push(a.receipt))})})},a.create=function(b){a.receipt.title=b.title,a.receipt.description=b.description,a.receipt.accountId=b.accountId,a.receipt.bankAccount=b.bankAccount,a.receipt.amount=b.amount,a.receipt.fundSource=b.fundSource,a.receipt.documentType=b.documentType,a.receipt.receiptDate=b.receiptDate,a.receipt.createdBy="neo",a.receipt.createdDate=(new e).format("YYYY-MM-DD HH:mm:ss")},a.cancel=function(){h.go("receipts")},a.update=function(){h.go("receipts")}}]),angular.module("childfundApp").controller("PaymentsCtrl",["$scope","payment","ModalService","_","moment","paymentS","paymentItem","$state",function(a,b,c,d,e,f,g,h){a.payments=f?f:[],a.payment=g?g:{},a.show=function(b){if(b)var e=d.find(a.payments,function(a){return a._id==b.id});c.showModal({templateUrl:"views/payment/new.html",controller:"ModalCtrl",inputs:{title:"payment",item:e}}).then(function(b){b.element.modal(),b.close.then(function(b){b&&(b._id?a.update(b):(a.create(b),a.payments.push(a.payment)))})})},a.create=function(b){a.payment.title=b.title,a.payment.description=b.description,a.payment.accountId=b.accountId,a.payment.fiscalYear=b.fiscalYear,a.payment.fundSource=b.fundSource,a.payment.status=b.status,a.payment.createdBy="neo",a.payment.createdDate=(new e).format("YYYY-MM-DD HH:mm:ss")},a.cancel=function(){h.go("payments")},a.update=function(){h.go("payments")}}]),angular.module("childfundApp").controller("BudgetsCtrl",["$scope","budget","ModalService","_","moment","budgetS","budgetItem","$state","account",function(a,b,c,d,e,f,g,h,i){a.budgets=f?f:[],a.budget=g?g:{},a.accounts=[],i.getData().$promise.then(function(b){a.accounts=b}),a.show=function(b){if(b)var e=d.find(a.budgets,function(a){return a._id==b.id});c.showModal({templateUrl:"views/budget/new.html",controller:"ModalCtrl",inputs:{title:"budget",item:e,select:a.accounts,current:""}}).then(function(b){b.element.modal(),b.close.then(function(b){b&&(b._id?a.update(b):(a.create(b),a.budgets.push(a.activity)))})})},a.create=function(b){a.budget.title=b.title,a.budget.description=b.description,a.budget.accountId=b.accountId,a.budget.fiscalYear=b.fiscalYear,a.budget.fundSource=b.fundSource,a.budget.status=b.status,a.budget.createdBy="neo",a.budget.createdDate=(new e).format("YYYY-MM-DD HH:mm:ss")},a.cancel=function(){h.go("budgets")},a.update=function(a){console.log(a),h.go("budgets")}}]),angular.module("childfundApp").controller("ReportsCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("childfundApp").controller("ActivityCtrl",["$scope","activity","ModalService","_","moment","activityS","activityItem","$state","project",function(a,b,c,d,e,f,g,h,i){a.activities=f?f:[],a.activity=g?g:{},a.projects=[],i.getData().$promise.then(function(b){a.projects=b}),a.show=function(b){if(b)var e=d.find(a.activities,function(a){return a._id==b.id});c.showModal({templateUrl:"views/activity/new.html",controller:"ModalCtrl",inputs:{title:"activity",item:e,select:a.projects,current:""}}).then(function(b){b.element.modal(),b.close.then(function(b){b&&(b._id?a.update(b):(a.create(b),a.activities.push(a.activity)))})})},a.create=function(b){a.activity.name=b.name,a.activity.description=b.description,a.activity.status=b.status,a.activity.projectid=b.projectid,a.activity.createdBy="neo",a.activity.createdDate=(new e).format("YYYY-MM-DD HH:mm:ss")},a.cancel=function(){h.go("activities")},a.update=function(){h.go("activities")}}]),angular.module("childfundApp").directive("cdLoading",function(){var a={restrict:"AE",template:'<div class="loading"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>'};return a}),angular.module("childfundApp").directive("caWidget",function(){return{transclude:!0,template:'<div class="widget" ng-transclude></div>',restrict:"EA"}}),angular.module("childfundApp").directive("widgetBody",function(){return{requires:"^caWidget",scope:{loading:"@?",classes:"@?"},transclude:!0,template:'<div class="widget-body" ng-class="classes"><rd-loading ng-show="loading"></rd-loading><div ng-hide="loading" class="widget-content" ng-transclude></div></div>',restrict:"E"}}),angular.module("childfundApp").directive("widgetFooter",function(){return{requires:"^caWidget",transclude:!0,template:'<div class="widget-footer" ng-transclude></div>',restrict:"E"}}),angular.module("childfundApp").directive("widgetHeader",function(){return{requires:"^caWidget",scope:{title:"@",icon:"@"},transclude:!0,template:'<div class="widget-header"><i class="fa" ng-class="icon"></i> {{title}} <div class="pull-right" ng-transclude></div></div>',restrict:"E"}}),angular.module("childfundApp").factory("program",["$resource",function(a){return a("scripts/program.json",{},{getData:{method:"GET",isArray:!0}})}]),angular.module("childfundApp").factory("project",["$resource",function(a){return a("scripts/project.json",{},{getData:{method:"GET",isArray:!0}})}]),angular.module("childfundApp").factory("activity",["$resource",function(a){return a("scripts/activity.json",{},{getData:{method:"GET",isArray:!0}})}]),angular.module("childfundApp").controller("ModalCtrl",["$scope","close","title","item","select","current",function(a,b,c,d,e,f){a.title="Add "+c,d&&(a.title="Update "+c,a[c]=d),e&&(a.options=e),f&&(a.current=f),a.close=function(a){b(a,500)},a.cancel=function(){b(null,500)}}]),angular.module("childfundApp").factory("receipt",["$resource",function(a){return a("scripts/receipt.json",{},{getData:{method:"GET",isArray:!0}})}]),angular.module("childfundApp").factory("payment",["$resource",function(a){return a("scripts/payment.json",{},{getData:{method:"GET",isArray:!0}})}]),angular.module("childfundApp").factory("budget",["$resource",function(a){return a("scripts/budget.json",{},{getData:{method:"GET",isArray:!0}})}]),angular.module("childfundApp").factory("report",["$resource",function(a){return a("scripts/report.json",{},{getData:{method:"GET",isArray:!0}})}]),angular.module("childfundApp").controller("AccountCtrl",["$scope","account","ModalService","_","moment","accountS","accountItem","$state","activity",function(a,b,c,d,e,f,g,h){a.accounts=f?f:[],a.account=g?g:{},a.activities=[],b.getData().$promise.then(function(b){a.activities=b}),a.show=function(b){if(b)var e=d.find(a.accounts,function(a){return a._id==b.id});c.showModal({templateUrl:"views/account/new.html",controller:"ModalCtrl",inputs:{title:"account",item:e,select:a.activities,current:""}}).then(function(b){b.element.modal(),b.close.then(function(b){b&&(b._id?a.update(b):(a.create(b),a.accounts.push(a.account)))})})},a.create=function(b){a.account.name=b.name,a.account.description=b.description,a.account.status=b.status,a.account.activityId=b.activityId,a.account.accountType=b.accountType,a.account.createdBy="neo",a.account.createdDate=(new e).format("YYYY-MM-DD HH:mm:ss")},a.cancel=function(){h.go("accounts")},a.update=function(){h.go("accounts")}}]),angular.module("childfundApp").factory("account",["$resource",function(a){return a("scripts/account.json",{},{getData:{method:"GET",isArray:!0}})}]);
